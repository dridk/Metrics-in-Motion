<!doctype html>
<html lang="us">

<head>
    <meta charset="utf-8">
    <title>jQuery UI Example Page</title>
    <link href="css/glyphicons.css" rel="stylesheet">
    <link href="css/UI.css" rel="stylesheet">
    <link href="css/nv.d3.css" rel="stylesheet">
    <script src="js/d3/d3.v3.min.js"></script>
    <script src="js/d3/vega.js"></script>
    <script src="js/jquery/jquery-1.10.2.js"></script>
    <script src="js/jquery/jquery-ui-1.10.4.custom.js"></script>
    <script src="js/mim.js"></script>
    <script src="js/mim.tools.js"></script>
    <script src="js/mim.builder.js"></script>
    <script src="js/mim.vega.js"></script>
    <script src="js/mim.vega.charts.js"></script>
    <script src="js/mim.vega.editor.UI.js"></script>
    <script src="js/mim.vega.editor.spec.js"></script>
    <script src="js/mim.vega.editor.data.js"></script>
    <script>
        var data = [
            ["USA", "Russia", "Germany", "France", "England", "Spain", "Italy", "Date"],
            ["2032", "121", "88", "312", "381", "90", "4369", "January-13-2013"],
            ["936", "95", "57", "160", "291", "92", "3228", "February-13-2013"],
            ["1482", "115", "82", "448", "521", "132", "3695", "March-13-2013"],
            ["1121", "93", "174", "405", "535", "90", "4296", "April-13-2013"],
            ["1213", "67", "37", "404", "298", "253", "4188", "May-13-2013"],
            ["1490", "82", "56", "197", "321", "94", "2089", "June-13-2013"],
            ["1398", "71", "64", "145", "309", "59", "2839", "July-13-2013"],
            ["1149", "104", "50", "165", "374", "65", "2049", "August-13-2013"],
            ["1452", "124", "41", "206", "371", "59", "2640", "September-13-2013"],
            ["1559", "67", "53", "149", "360", "101", "2606", "October-13-2013"],
            ["1480", "150", "40", "283", "539", "145", "2833", "November-13-2013"],
            ["2765", "193", "80", "596", "709", "165", "4393", "December-13-2013"]
        ];
        $(function() {
	    
	    var onChange = function(o){
	      var v = $(this).val();
	      console.log("value changed");
	      console.log("New value: "+v);
	    }

            var html = [{"classes":"container","children":[{"classes":"left_sidebar","children":[{"classes":["portlet","portlet-fixed"],"children":[{"classes":"portlet-header","text":"Data"},{"classes":"portlet-content","children":[{"tag":"label","text":"Data Contains Headers:"},{"tag":"input","id":"vega-editor-data-headers","attrs":[{"key":"type","val":"checkbox"},{"key":"checked","val":"checked"}],"onChange":onChange}]}]},{"classes":"column","children":[{"classes":"portlet","children":[{"classes":"portlet-header","text":"Cat A"},{"classes":"portlet-content","children":[{"classes":"row","children":[{"tag":"label","text":"Title:"}]},{"classes":"row","children":[{"tag":"input","id":"vega-editor-col0-title","attrs":[{"key":"type","val":"text"},{"key":"value","val":""}],"onChange":onChange}]},{"classes":"row","children":[{"tag":"label","text":"Data Type:"}]},{"classes":"row","children":[{"tag":"select","children":[{"tag":"option","text":"Text","attrs":[{"key":"value","val":"text"},{"key":"selected","val":"selected"}]},{"tag":"option","text":"Number","attrs":[{"key":"value","val":"number"}]},{"tag":"option","text":"Date/Time","attrs":[{"key":"value","val":"date"}]}],"onChange":onChange}]}]}]},{"classes":"portlet","children":[{"classes":"portlet-header","text":"Cat B"},{"classes":"portlet-content","children":[{"classes":"row","children":[{"tag":"label","text":"Title:"}]},{"classes":"row","children":[{"tag":"input","id":"vega-editor-col0-title","attrs":[{"key":"type","val":"text"},{"key":"value","val":""}]}]},{"classes":"row","children":[{"tag":"label","text":"Data Type:"}]},{"classes":"row","children":[{"tag":"select","children":[{"tag":"option","text":"Text","attrs":[{"key":"value","val":"text"},{"key":"selected","val":"selected"}]},{"tag":"option","text":"Number","attrs":[{"key":"value","val":"number"}]},{"tag":"option","text":"Date/Time","attrs":[{"key":"value","val":"date"}]}]}]}]}]},{"classes":"portlet","children":[{"classes":"portlet-header","text":"Cat A"},{"classes":"portlet-content","children":[{"classes":"row","children":[{"tag":"label","text":"Title:"}]},{"classes":"row","children":[{"tag":"input","id":"vega-editor-col0-title","attrs":[{"key":"type","val":"text"},{"key":"value","val":""}]}]},{"classes":"row","children":[{"tag":"label","text":"Data Type:"}]},{"classes":"row","children":[{"tag":"select","children":[{"tag":"option","text":"Text","attrs":[{"key":"value","val":"text"},{"key":"selected","val":"selected"}]},{"tag":"option","text":"Number","attrs":[{"key":"value","val":"number"}]},{"tag":"option","text":"Date/Time","attrs":[{"key":"value","val":"date"}]}]}]}]}]}]},{"classes":["portlet","portlet-fixed"],"children":[{"classes":"portlet-header","text":"Chart"},{"classes":"portlet-content","children":[{"classes":"row","children":[{"tag":"label","text":"Title:"},{"tag":"input","id":"vega-editor-chart-title","attrs":[{"key":"type","val":"text"},{"key":"value","val":""}]}]},{"classes":"row","children":[{"tag":"label","text":"Subtitle:"},{"tag":"input","id":"vega-editor-chart-subtitle","attrs":[{"key":"type","val":"text"},{"key":"value","val":""}]}]},{"classes":"row","children":[{"tag":"label","text":"Show Legend:"},{"tag":"input","id":"vega-editor-data-headers","attrs":[{"key":"type","val":"checkbox"},{"key":"checked","val":"checked"}]}]},{"classes":"row","children":[{"tag":"label","text":"Interpolate:"},{"tag":"input","id":"vega-editor-chart-interpolate","attrs":[{"key":"type","val":"checkbox"}]}]}]}]},{"classes":["portlet","portlet-fixed"],"children":[{"classes":"portlet-header","text":"Sacle X"},{"classes":"portlet-content","children":[{"classes":"row","children":[{"tag":"label","text":"Title:"},{"tag":"input","id":"vega-editor-scalex-title","attrs":[{"key":"type","val":"text"},{"key":"value","val":""}]}]},{"classes":"row","children":[{"tag":"label","text":"Display Title:"},{"tag":"input","id":"vega-editor-scalex-title-show","attrs":[{"key":"type","val":"checkbox"}]}]},{"classes":"row","children":[{"tag":"label","text":"Padd Scale:"},{"tag":"input","id":"vega-editor-scalex-nice","attrs":[{"key":"type","val":"checkbox"},{"key":"checked","val":"checked"}]}]},{"classes":"row","children":[{"tag":"label","text":"Show Zero Mark:"},{"tag":"input","id":"ega-editor-scalex-zero","attrs":[{"key":"type","val":"checkbox"},{"key":"checked","val":"checked"}]}]},{"classes":"row","children":[{"tag":"label","text":"Show Grid:"},{"tag":"input","id":"vega-editor-scalex-grid","attrs":[{"key":"type","val":"checkbox"},{"key":"checked","val":"checked"}]}]}]}]},{"classes":"column","children":[]},{"classes":["portlet","portlet-fixed"],"children":[{"classes":"portlet-header","text":"Sacle Y"},{"classes":"portlet-content","children":[{"classes":"row","children":[{"tag":"label","text":"Title:"},{"tag":"input","id":"vega-editor-scaley-title","attrs":[{"key":"type","val":"text"},{"key":"value","val":""}]}]},{"classes":"row","children":[{"tag":"label","text":"Display Title:"},{"tag":"input","id":"vega-editor-scaley-title-show","attrs":[{"key":"type","val":"checkbox"}]}]},{"classes":"row","children":[{"tag":"label","text":"Padd Scale:"},{"tag":"input","id":"vega-editor-scaley-nice","attrs":[{"key":"type","val":"checkbox"},{"key":"checked","val":"checked"}]}]},{"classes":"row","children":[{"tag":"label","text":"Show Zero Mark:"},{"tag":"input","id":"ega-editor-scaley-zero","attrs":[{"key":"type","val":"checkbox"},{"key":"checked","val":"checked"}]}]},{"classes":"row","children":[{"tag":"label","text":"Show Grid:"},{"tag":"input","id":"vega-editor-scaley-grid","attrs":[{"key":"type","val":"checkbox"},{"key":"checked","val":"checked"}]}]}]}]},{"classes":"column","children":[]}]},{"classes":"main"}]}];


            var window = new mimUI.builder.Window();
            html.push(window);

            mimUI.builder.setRoot(mimUI.jq("body"));
            mimUI.builder.build(html);

            $(".column").sortable({
                cancel: ".portlet-fixed",
                connectWith: ".column",
                handle: ".portlet-header",
                cancel: ".portlet-toggle",
                placeholder: "portlet-placeholder ui-corner-all",
                update: function(event, ui) {
                    console.log("Sorting finished");
                }
            });
            $(".portlet")
                .addClass("ui-widget ui-widget-content ui-helper-clearfix ui-corner-all")
                .find(".portlet-header")
                .addClass("ui-widget-header ui-corner-all")
                .prepend("<span class='glyphicons circle_minus portlet-toggle'></span>");
            $(".portlet-toggle").click(function() {
                var icon = $(this);
                icon.toggleClass("circle_minus circle_plus");
                icon.closest(".portlet").find(".portlet-content").toggle();
            });
            //$(".portlet-toggle").click();

            mimUI.vega.editor.data.set(data);
        });
    </script>
    <style>
        body {
        min-width: 520px;
        }
        .left_sidebar {
            float: left;
            width: 260px;
        }
        
        .column {
            display: block;
            width: 240px;
            padding: 0 10px 10px 10px;
            background-color: #eee;
        }
        .portlet {
            padding-bottom:5px;
        }
        .portlet-fixed .portlet-header {
background: gray;
}
        .portlet-header {
        padding: 0.2em 0.3em;
        margin-bottom: 0;
        position: relative;
        }
        .portlet-toggle {
        position: absolute;
        right: 8px;
        }
        .portlet-content {
        padding: 0.4em;
border: 1px solid #ccc;
border-top: none;
        }
        .portlet-placeholder {
        border: 1px dotted black;
        margin: 0 1em 1em 0;
        height: 25px;
        }
    </style>
</head>

<body></body>

</html>